[
  {
    "id": "TC001",
    "title": "test_api_buscar_cep_address_lookup",
    "description": "Verify that the api_buscar_cep endpoint correctly integrates with multiple CEP APIs, returns accurate address data, and properly falls back to alternative APIs if the primary fails.",
    "url": "/system/api/buscar-cep/",
    "method": "GET",
    "requires_auth": true,
    "required_parameters": {"cep": "string"},
    "expected_response_keys": ["cep", "street", "district", "city", "uf", "complement"],
    "auth_verification_url": "/system/clientes/",
    "verify_session_cookie": true,
    "note": "API requires authentication. Response keys are in English (street, district, city, uf, complement). CRITICAL: After POST /login/ with allow_redirects=False, IMMEDIATELY verify sessionid cookie in session.cookies.get_dict() BEFORE following redirects. If cookie not present, login failed even with status 302."
  },
  {
    "id": "TC002",
    "title": "test_api_dados_cliente_retrieval",
    "description": "Ensure that the api_dados_cliente endpoint returns complete and accurate client data based on the provided client identifier.",
    "url": "/system/clientes/dados/",
    "method": "GET",
    "requires_auth": true,
    "required_parameters": {"cliente_id": "integer"},
    "expected_response_keys": ["data_base", "cliente"],
    "auth_verification_url": "/system/clientes/",
    "verify_session_cookie": true,
    "note": "Requires cliente_id parameter. Returns data_base (date) and cliente.nome, NOT full client details. CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY verify sessionid cookie before following redirects. DO NOT use '/system/' to verify auth (URL doesn't exist). Use '/system/clientes/' instead."
  },
  {
    "id": "TC003",
    "title": "test_api_cliente_info_access",
    "description": "Validate that the api_cliente_info endpoint provides detailed client information securely and only to authorized users.",
    "url": "/system/api/cliente-info/",
    "method": "GET",
    "requires_auth": true,
    "required_parameters": {"cliente_id": "integer"},
    "expected_response_keys": ["criado_em"],
    "auth_verification_url": "/system/clientes/",
    "verify_session_cookie": true,
    "note": "IMPORTANT: This API returns ONLY criado_em (ISO datetime), NOT full client details. Requires cliente_id parameter. CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY check sessionid cookie in session.cookies.get_dict() BEFORE following redirects. If cookie not present, login failed even with status 302."
  },
  {
    "id": "TC004",
    "title": "test_api_prazo_status_processo_deadline_and_status",
    "description": "Check that the api_prazo_status_processo endpoint returns correct process deadlines and status information for visa processes, reflecting the current state and progress.",
    "url": "/system/api/prazo-status-processo/",
    "method": "GET",
    "requires_auth": true,
    "required_parameters": {"status_id": "integer"},
    "expected_response_keys": ["prazo_padrao_dias"],
    "auth_verification_url": "/system/processos/",
    "verify_session_cookie": true,
    "note": "Requires status_id parameter (NOT processo_id). Returns prazo_padrao_dias (days) for the status, not process details. CRITICAL: Use allow_redirects=False on POST /login/, verify sessionid cookie IMMEDIATELY after POST before redirects. DO NOT check '/system/' - use '/system/processos/' instead."
  },
  {
    "id": "TC005",
    "title": "test_cadastrar_cliente_view_registration_steps",
    "description": "Test the client registration process via cadastrar_cliente_view, ensuring multi-step forms function correctly, including address auto-fill via CEP lookup and dependent management.",
    "url": "/system/clientes/cadastrar/",
    "method": "POST",
    "requires_auth": true,
    "requires_csrf": true,
    "auth_verification_url": "/system/clientes/",
    "verify_session_cookie": true,
    "note": "CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY verify sessionid cookie in session.cookies.get_dict() BEFORE following redirects. Status 302 is normal, but cookie must be present. CSRF token may be rotated after login, get new token from form page before POST."
  },
  {
    "id": "TC006",
    "title": "test_criar_processo_process_creation_and_tracking",
    "description": "Verify that the criar_processo endpoint allows creation of visa processes with correct association to clients and trips, and supports tracking through configurable steps and statuses.",
    "url": "/system/processos/criar/",
    "method": "POST",
    "requires_auth": true,
    "requires_csrf": true,
    "login_field": "identifier",
    "auth_verification_url": "/system/processos/",
    "verify_session_cookie": true,
    "note": "Login uses 'identifier' field. CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY verify sessionid cookie exists in session.cookies.get_dict() BEFORE following redirects. Get CSRF token from form page after login for POST request."
  },
  {
    "id": "TC007",
    "title": "test_criar_formulario_dynamic_form_creation",
    "description": "Ensure that the criar_formulario endpoint supports creation of dynamic visa forms per visa type, including various question types and options.",
    "url": "/system/formularios/tipos/criar/",
    "method": "POST",
    "requires_auth": true,
    "requires_csrf": true,
    "auth_verification_url": "/system/formularios/",
    "verify_session_cookie": true,
    "note": "CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY verify sessionid cookie in session.cookies.get_dict() BEFORE following redirects. Only after verifying cookie, follow redirect if needed. Get CSRF token from form page HTML after login before POST."
  },
  {
    "id": "TC008",
    "title": "test_listar_viagens_trip_listing",
    "description": "Validate that the listar_viagens endpoint returns accurate and complete lists of trips with associated countries, visa types, and travel dates.",
    "url": "/system/viagens/listar/",
    "method": "GET",
    "requires_auth": true,
    "returns_html": true,
    "auth_verification_url": "/system/viagens/",
    "verify_session_cookie": true,
    "note": "Returns HTML, not JSON. CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY verify sessionid cookie exists in session.cookies.get_dict() BEFORE accepting status 200/302. If cookie not present, login failed. Check response.text for HTML content."
  },
  {
    "id": "TC009",
    "title": "test_criar_partner_partner_management",
    "description": "Test the criar_partner endpoint for correct creation and management of partners, including segment classification and active status control.",
    "url": "/system/partners/criar/",
    "method": "POST",
    "requires_auth": true,
    "requires_csrf": true,
    "auth_verification_url": "/system/partners/",
    "verify_session_cookie": true,
    "note": "CRITICAL: Use allow_redirects=False on POST /login/. Status 302 is NOT failure, but you MUST verify sessionid cookie IMMEDIATELY after POST in session.cookies.get_dict() BEFORE following redirects. If cookie not present, login failed. Only then follow redirect. Get CSRF token from form page for POST."
  },
  {
    "id": "TC010",
    "title": "test_home_financeiro_financial_control",
    "description": "Verify that the home_financeiro endpoint correctly displays financial records, supports payment status updates, and maintains observation notes.",
    "url": "/system/financeiro/listar/",
    "method": "GET",
    "requires_auth": true,
    "returns_html": true,
    "auth_verification_url": "/system/financeiro/",
    "verify_session_cookie": true,
    "note": "Returns HTML. CRITICAL: Use allow_redirects=False on POST /login/, then IMMEDIATELY verify sessionid cookie in session.cookies.get_dict() BEFORE following redirects. Accept 200 or 302 as status, but cookie MUST be present. If cookie absent, login failed. Check response.text for HTML content."
  }
]
