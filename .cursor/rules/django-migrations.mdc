---
description: Django migrations - never create migration files manually, always let Django generate them
alwaysApply: true
globs: ["visary/**/migrations/*.py", "visary/**/models.py"]
---

# Django Migrations

## Mandatory Rule

**NEVER create migration files manually** (files in `*/migrations/*.py`).

## Correct Process

1. **Always correct/adjust code** (models, fields, relationships, etc.)
2. **Let Django create migrations automatically** when executing `python visary/manage.py makemigrations`
3. **Never write, edit or create migration files directly**

## Exceptions

- **No exceptions**: migrations must always be generated by Django via `makemigrations`

## When Modifying Models

- When adding/removing fields: adjust model, don't create migration
- **When removing unused/legacy fields**: remove from model, Django will generate migration automatically
- When changing field types: adjust model, don't create migration
- When adding/removing relationships: adjust model, don't create migration
- When changing Meta options: adjust model, don't create migration

## Allowed Commands

- `python visary/manage.py makemigrations` - to generate migrations automatically
- `python visary/manage.py migrate` - to apply migrations
- `python visary/manage.py showmigrations` - to verify status

## Prohibited Commands

- Create file `*/migrations/XXXX_name.py` manually
- Edit existing migration files (except in very specific and rare cases, always consulting before)
- Copy migrations from other projects

## Validation

After modifying models, always suggest user execute `python visary/manage.py makemigrations` to validate that changes are correct and that Django can generate migrations automatically.
