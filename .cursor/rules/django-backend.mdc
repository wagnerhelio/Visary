---
description: Django backend analysis and correction - views, models, services, APIs, forms, signals, tasks, commands
alwaysApply: true
globs: ["visary/**/*.py"]
---

# Django Backend Analysis and Correction

Specialization in: Views, Models, Services, APIs/serializers, Forms, signals, tasks, management commands.

## Process

### 1) ANALYZE

**Read complete file before analyzing**. Identify: logical failures, ORM/SQL failures, hardcodes, vulnerabilities, incorrect documentation, emojis/logs, problems in models, session/cookies/reload failures, **unused/legacy/unnecessary fields in models**, **debugs and logs**.

### 2) VALIDATE SYNTAX AND ERRORS

- Validate Python syntax in all modified/created files
- Verify import errors, types, indentation
- Confirm code is executable/compilable

### 3) EXECUTE CORRECTIONS IMMEDIATELY

Logic adjustments, ORM, hardcode removal, security corrections, cleanup, session/cookies/reload adjustments, **removal of unused/legacy/unnecessary fields (with migration)**. Maintain original business rule.

- **NEVER create new files for corrections**: implement corrections directly in existing files using editing tools
- **Corrections must be done manually**: edit existing files directly, don't create temporary, backup or correction files

### 4) CLEAN CODE

**NEVER create docstrings or comments**. Remove existing docstrings/comments. Code must be self-explanatory and clean.

## File Reading

- **ALWAYS read complete file, from start to finish**, without partial analyses
- For large files: read in multiple sequential calls until EOF, but **analyze complete file** before making corrections
- **NEVER make corrections based on partial analysis**: only correct after having read and understood entire file
- If file is too large for single context, read in sequential blocks and maintain complete context before correcting

## Direct Execution

**NEVER create reports or plans in files**. Identify problems and **implement corrections immediately** in existing files using editing tools.

**Process**:
1. **Read complete file** (from start to finish)
2. **Identify problems** mentally
3. **Implement corrections directly** in existing files
4. **Validate** with verification commands

Don't create new files or temporary files. Edit original files directly.

## Correction Rules

- Preserve original business rule
- Conservative changes
- Incremental and safe refactorings
- Adjust insecure ORM queries
- Handle predictable exceptions
- Remove concatenated SQL
- **NEVER create new files for corrections**: all corrections must be implemented directly in existing files
- **NEVER create temporary, backup or correction files**: edit original files directly

## Hardcode and Dynamism

- **Avoid hardcode**: make code dynamic, expandable and customizable
- **CRUDs must be generic/configurable**, not fixed for specific entities
- **Always think in CRUD**: before implementing, identify CRUD operations and create generic code
- **Avoid complex conditional structures**: prefer configuration, dictionaries, or reusable base classes
- **Acceptable exception**: initial seed commands to populate data on initialization (ex: default modules, initial permissions)
- Reorganize hardcodes into constants/configs when necessary

## Validation

- Remove unnecessary emojis/logs
- **ALWAYS remove debugs and logs** when identifying (print, console.log, logger.debug, logger.info, etc)
- **NEVER implement debugs or logs** - must be manually inserted by operator when necessary
- Fix session/cookies/reload according to best practices
- **Identify and remove unused/legacy/unnecessary fields in models (with validation and migration)**
- **In new implementations, create only extremely necessary fields with correct relationships**
- **NEVER create docstrings or comments** - remove existing ones
- Validate syntax before finishing
